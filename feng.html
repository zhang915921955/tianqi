<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>feng</title>
		<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
		<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
		<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
		<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
	</head>

	<body>
		<input type="text" class="ipt1" placeholder="省" />
		<input type="text" class="ipt2" placeholder="地区" />
		<button type="button" class="btn">查询</button>
		<ul class="data">
			<li class="shop" style="list-style: none;"></li>
		</ul>
	</body>
	<script type="text/javascript">
		var ipt1 = document.querySelector('.ipt1')
		var ipt2 = document.querySelector('.ipt2')
		var btn = document.querySelector('.btn')
	
		btn.onclick = function() {
			var html = '';
			$.ajax({
				url: 'https://wis.qq.com/weather/common?source=xw&weather_type=forecast_1h|forecast_24h|index|alarm|limit|tips', //地址
				data: {
					province: ipt1.value,
					city: ipt2.value
				},
				dataType: 'jsonp', //数据类型
				type: 'GET', //类型
				success: function(res) {
					console.log(res)
					//console.log(res.result.data)
					let resd = res.data.forecast_24h
					// for(i=0;i<resd.length;i++){
					// 	console.log(resd[i].content)
					// 	$('.data').html(resd[0].content)
					// }
					if(res.status==200){
						$.each(resd, function(i, item) {
							html +=
								`
								<li class="shop">
									${resd[i].time}
									${resd[i].day_weather}
									${resd[i].max_degree}度--
									${resd[i].min_degree}度
									${resd[i].night_wind_direction}
									${resd[i].night_weather_short}
								</li>
							`
						})
						$(".shop").append(html)
					}else{
						alert('查询错误')
					}
					
				},
			})
		}
	</script>
</html>
